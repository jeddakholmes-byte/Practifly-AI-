<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practifly AI å¤§ç£å€æ•¸å­¸ç²¾è‹±æŒ‘æˆ°è³½ - è¶…ç´šç®¡ç†å“¡æ•¸æ“šä¸­å¿ƒ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        * { font-family: 'Noto Sans HK', sans-serif; }
        
        body { 
            background: linear-gradient(180deg, #0f0f23 0%, #1a1a3e 50%, #0f2847 100%); 
            min-height: 100vh;
        }
        
        .glass-card { 
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(255, 255, 255, 0.1); 
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        }
        
        .neon-border { 
            box-shadow: 0 4px 30px rgba(139, 124, 182, 0.15), 0 8px 32px rgba(0, 0, 0, 0.3); 
        }
        
        .stat-card { 
            background: linear-gradient(145deg, rgba(107, 91, 149, 0.2), rgba(139, 124, 182, 0.05)); 
            transition: all 0.3s ease; 
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-color, #8B7CB6), transparent);
        }
        
        .stat-card:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 12px 40px rgba(139, 124, 182, 0.25); 
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #8B7CB6, #5DADE2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .tab-btn { 
            padding: 10px 20px; 
            border-radius: 10px; 
            font-weight: 600; 
            transition: all 0.3s; 
            cursor: pointer;
            font-size: 13px;
        }
        .tab-btn.active { 
            background: linear-gradient(135deg, #6B5B95, #8B7CB6); 
            box-shadow: 0 4px 15px rgba(139, 124, 182, 0.4);
        }
        .tab-btn:not(.active) { background: rgba(255,255,255,0.06); }
        .tab-btn:not(.active):hover { background: rgba(139, 124, 182, 0.2); }
        
        .school-select { 
            background: rgba(255, 255, 255, 0.06); 
            border: 1px solid rgba(139, 124, 182, 0.3); 
            color: white; 
            padding: 10px 14px; 
            border-radius: 10px; 
            outline: none; 
            cursor: pointer; 
            transition: all 0.3s;
            font-size: 13px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%238B7CB6' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 18px;
            padding-right: 36px;
        }
        .school-select:hover, .school-select:focus { 
            border-color: #8B7CB6; 
            box-shadow: 0 0 15px rgba(139, 124, 182, 0.2);
        }
        .school-select option { background: #1a1a2e; color: white; }
        
        .grade-btn { 
            transition: all 0.3s; 
            border: 1px solid transparent; 
            padding: 8px 14px; 
            border-radius: 8px; 
            font-size: 12px;
            font-weight: 600;
        }
        .grade-btn.active { 
            border-color: #8B7CB6; 
            background: rgba(139, 124, 182, 0.3);
        }
        .grade-btn:not(.active) { background: rgba(255,255,255,0.06); }
        .grade-btn:not(.active):hover { background: rgba(139, 124, 182, 0.15); }
        
        .metric-card {
            background: rgba(255,255,255,0.04);
            border-radius: 14px;
            padding: 18px;
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.3s;
        }
        .metric-card:hover {
            border-color: rgba(139, 124, 182, 0.3);
        }
        
        .data-table { width: 100%; border-collapse: separate; border-spacing: 0 4px; }
        .data-table th { 
            background: rgba(139, 124, 182, 0.2); 
            padding: 12px; 
            text-align: left; 
            font-size: 11px; 
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .data-table td { 
            background: rgba(255, 255, 255, 0.02); 
            padding: 10px 12px; 
            font-size: 13px;
        }
        .data-table tr:hover td { background: rgba(139, 124, 182, 0.1); }
        
        .scrollbar-thin::-webkit-scrollbar { width: 5px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: rgba(255,255,255,0.02); border-radius: 3px; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(139,124,182,0.4); border-radius: 3px; }
        
        .level-tab { 
            padding: 8px 16px; 
            font-size: 12px; 
            border-radius: 8px; 
            cursor: pointer; 
            transition: all 0.3s;
            font-weight: 600;
        }
        .level-tab.active { background: linear-gradient(135deg, #6B5B95, #8B7CB6); }
        .level-tab:not(.active) { background: rgba(255,255,255,0.06); }
        .level-tab:not(.active):hover { background: rgba(139,124,182,0.2); }
        
        .region-card {
            background: rgba(255,255,255,0.04);
            border-radius: 14px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }
        .region-card:hover { border-color: rgba(139, 124, 182, 0.3); }
        .region-card.selected { border-color: var(--region-color); background: rgba(139, 124, 182, 0.1); }
        
        .compare-bar {
            height: 8px;
            border-radius: 4px;
            background: rgba(255,255,255,0.1);
            overflow: hidden;
        }
        .compare-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease-out;
        }
        
        .ranking-item {
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        .ranking-item:hover {
            background: rgba(139, 124, 182, 0.1);
            border-left-color: #8B7CB6;
            padding-left: 15px;
        }
        
        .pulse-dot {
            animation: pulse 2s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .icon-box {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .highlight-value {
            position: relative;
        }
        .highlight-value::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: currentColor;
            opacity: 0.3;
            border-radius: 1px;
        }
    </style>
</head>
<body class="text-white">
    <!-- Header -->
    <header class="glass-card px-6 py-4 sticky top-0 z-50 relative">
        <div class="max-w-[1920px] mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg shadow-purple-500/20">
                    <i class="fas fa-cube text-xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold gradient-text">Practifly AI æ•¸æ“šä¸­å¿ƒ</h1>
                    <p class="text-xs text-gray-400 flex items-center gap-2">
                        <span>2025 å¤§ç£å€æ ¡éš›æ•¸ç†æ€ç¶­ç²¾è‹±æŒ‘æˆ°è³½</span>
                        <span class="w-1 h-1 bg-gray-500 rounded-full"></span>
                        <span>Super Admin Dashboard</span>
                    </p>
                </div>
            </div>
            <div class="flex items-center space-x-5">
                <div class="flex items-center gap-2 px-3 py-1.5 bg-red-500/10 rounded-lg border border-red-500/20">
                    <span class="text-sm">ğŸ‡­ğŸ‡°</span>
                    <span class="text-xs font-medium text-red-300">é¦™æ¸¯æ•™è‚²ç§‘æŠ€</span>
                </div>
                <div class="flex items-center space-x-2 px-3 py-1.5 bg-emerald-500/10 rounded-lg border border-emerald-500/20">
                    <span class="pulse-dot w-2 h-2 bg-emerald-400 rounded-full"></span>
                    <span class="text-xs text-emerald-300 font-medium">ç³»çµ±é‹è¡Œä¸­</span>
                </div>
                <div class="text-xs text-gray-400 flex items-center gap-2">
                    <i class="far fa-clock text-purple-400"></i>
                    <span id="currentTime" class="font-mono"></span>
                </div>
                <div class="flex items-center space-x-2 pl-4 border-l border-white/10">
                    <div class="w-9 h-9 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-xs font-bold">SA</div>
                    <div>
                        <p class="text-xs font-semibold">Super Admin</p>
                        <p class="text-[10px] text-gray-500">ç®¡ç†å“¡æ¬Šé™</p>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-[1920px] mx-auto px-6 py-5">
        <!-- Stats Overview -->
        <div class="grid grid-cols-6 gap-4 mb-5">
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #3B82F6;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-blue-500/20"><i class="fas fa-school text-blue-400"></i></div>
                    <span class="badge bg-blue-500/15 text-blue-400">å…¨åœ‹</span>
                </div>
                <p class="text-3xl font-bold mb-1" id="totalSchools">0</p>
                <p class="text-xs text-gray-400">åƒè³½å­¸æ ¡</p>
                <div class="mt-3 pt-3 border-t border-white/5 flex justify-between text-[11px] text-gray-500">
                    <span>å°å­¸ 94 æ‰€</span>
                    <span>ä¸­å­¸ 63 æ‰€</span>
                </div>
            </div>
            
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #A855F7;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-purple-500/20"><i class="fas fa-users text-purple-400"></i></div>
                    <span class="badge bg-purple-500/15 text-purple-400">åˆè³½</span>
                </div>
                <p class="text-3xl font-bold mb-1" id="totalParticipants">0</p>
                <p class="text-xs text-gray-400">åˆè³½ç¸½äººæ•¸</p>
                <div class="mt-3 pt-3 border-t border-white/5 flex items-center gap-2 text-[11px]">
                    <i class="fas fa-arrow-up text-emerald-400"></i>
                    <span class="text-emerald-400">è¼ƒå»å¹´ +38.5%</span>
                </div>
            </div>
            
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #F59E0B;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-amber-500/20"><i class="fas fa-medal text-amber-400"></i></div>
                    <span class="badge bg-amber-500/15 text-amber-400">è¤‡è³½</span>
                </div>
                <p class="text-3xl font-bold mb-1" id="semifinalCount">0</p>
                <p class="text-xs text-gray-400">è¤‡è³½æ™‰ç´šäººæ•¸</p>
                <div class="mt-3 pt-3 border-t border-white/5 text-[11px] text-gray-500">
                    æ™‰ç´šç‡ <span class="text-amber-400 font-semibold">47.8%</span>
                </div>
            </div>
            
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #EF4444;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-red-500/20"><i class="fas fa-crown text-red-400"></i></div>
                    <span class="badge bg-red-500/15 text-red-400">æ±ºè³½</span>
                </div>
                <p class="text-3xl font-bold mb-1" id="finalCount">0</p>
                <p class="text-xs text-gray-400">æ±ºè³½æ™‰ç´šäººæ•¸</p>
                <div class="mt-3 pt-3 border-t border-white/5 text-[11px] text-gray-500">
                    ç²¾è‹±ç‡ <span class="text-red-400 font-semibold">10.7%</span>
                </div>
            </div>
            
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #10B981;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-emerald-500/20"><i class="fas fa-chart-line text-emerald-400"></i></div>
                    <span class="badge bg-emerald-500/15 text-emerald-400">å¹³å‡</span>
                </div>
                <div class="flex items-baseline gap-1">
                    <p class="text-3xl font-bold">76.8</p>
                    <p class="text-sm text-gray-400">åˆ†</p>
                </div>
                <p class="text-xs text-gray-400">å…¨åœ‹å¹³å‡åˆ†æ•¸</p>
                <div class="mt-3 pt-3 border-t border-white/5 flex justify-between text-[11px]">
                    <span class="text-pink-400">HK 77.2</span>
                    <span class="text-orange-400">GBA 78.5</span>
                    <span class="text-blue-400">SH 82.3</span>
                </div>
            </div>
            
            <div class="stat-card glass-card rounded-xl p-5 relative" style="--accent-color: #6366F1;">
                <div class="flex items-center justify-between mb-3">
                    <div class="icon-box bg-indigo-500/20"><i class="fas fa-percentage text-indigo-400"></i></div>
                    <span class="badge bg-indigo-500/15 text-indigo-400">åŠæ ¼ç‡</span>
                </div>
                <div class="flex items-baseline gap-1">
                    <p class="text-3xl font-bold">90.8</p>
                    <p class="text-sm text-gray-400">%</p>
                </div>
                <p class="text-xs text-gray-400">æ•´é«”åŠæ ¼ç‡</p>
                <div class="mt-3 pt-3 border-t border-white/5 text-[11px] text-gray-500">
                    å„ªç§€ç‡ <span class="text-amber-400 font-semibold">30.7%</span>
                </div>
            </div>
        </div>

        <!-- Map Section - Full Width -->
        <div class="glass-card rounded-xl p-5 neon-border mb-5 relative">
            <div class="flex items-center justify-between mb-4">
                <div class="section-title mb-0">
                    <div class="icon-box bg-purple-500/20"><i class="fas fa-map-marked-alt text-purple-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">å…¨åœ‹åƒè³½å­¸æ ¡åˆ†ä½ˆ</h2>
                        <p class="text-xs text-gray-400">è¦†è“‹ 9 å€‹åŸå¸‚ Â· 190+ å„ªè³ªå­¸æ ¡</p>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button class="tab-btn active" id="mapTabBtn" onclick="switchView('map')"><i class="fas fa-globe-asia mr-2"></i>åœ°åœ–</button>
                    <button class="tab-btn" id="listTabBtn" onclick="switchView('list')"><i class="fas fa-list mr-2"></i>åˆ—è¡¨</button>
                </div>
            </div>
            
            <div class="grid grid-cols-12 gap-5">
                <div class="col-span-9" id="mapView">
                    <div id="chinaMap" style="width: 100%; height: 420px; border-radius: 12px;"></div>
                </div>
                <div class="col-span-9 hidden" id="listView">
                    <div class="grid grid-cols-3 gap-3 max-h-[420px] overflow-auto scrollbar-thin pr-2" id="cityListContainer"></div>
                </div>
                
                <!-- Region Stats -->
                <div class="col-span-3 space-y-3">
                    <div class="bg-white/3 rounded-xl p-4 border border-white/5">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="w-3 h-3 rounded bg-pink-500"></span>
                            <span class="text-sm font-semibold">æ¸¯æ¾³åœ°å€</span>
                            <span class="ml-auto text-xs text-gray-400">70%</span>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span class="flex items-center gap-2"><span class="text-base">ğŸ‡­ğŸ‡°</span>é¦™æ¸¯</span>
                                <span class="text-gray-300">107 æ‰€ Â· <span class="text-pink-400 font-semibold">7,000</span> äºº</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span class="flex items-center gap-2"><span class="text-base">ğŸ‡²ğŸ‡´</span>æ¾³é–€</span>
                                <span class="text-gray-300">3 æ‰€ Â· <span class="text-purple-400 font-semibold">450</span> äºº</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white/3 rounded-xl p-4 border border-white/5">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="w-3 h-3 rounded bg-orange-500"></span>
                            <span class="text-sm font-semibold">å¤§ç£å€å…§åœ°</span>
                            <span class="ml-auto text-xs text-gray-400">8%</span>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span>æ·±åœ³</span>
                                <span class="text-gray-300">8 æ‰€ Â· <span class="text-orange-400 font-semibold">850</span> äºº</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span>å»£å·Â·ä½›å±±</span>
                                <span class="text-gray-300">4 æ‰€ Â· <span class="text-amber-400 font-semibold">600</span> äºº</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white/3 rounded-xl p-4 border border-white/5">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="w-3 h-3 rounded bg-blue-500"></span>
                            <span class="text-sm font-semibold">å…¨åœ‹å…¶ä»–åŸå¸‚</span>
                            <span class="ml-auto text-xs text-gray-400">22%</span>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span>ä¸Šæµ·</span>
                                <span class="text-gray-300">21 æ‰€ Â· <span class="text-blue-400 font-semibold">1,680</span> äºº</span>
                            </div>
                            <div class="flex justify-between items-center p-2 bg-white/3 rounded-lg">
                                <span>é‡æ…¶Â·åŒ—äº¬Â·å…¶ä»–</span>
                                <span class="text-gray-300">14 æ‰€ Â· <span class="text-cyan-400 font-semibold">1,320</span> äºº</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Regional Comparison -->
        <div class="glass-card rounded-xl p-5 neon-border mb-5 relative">
            <div class="flex items-center justify-between mb-5">
                <div class="section-title mb-0">
                    <div class="icon-box bg-cyan-500/20"><i class="fas fa-balance-scale text-cyan-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">å€åŸŸæ•¸æ“šå°æ¯”</h2>
                        <p class="text-xs text-gray-400">é¸æ“‡å€åŸŸæŸ¥çœ‹è©³ç´°è¡¨ç¾å°æ¯”</p>
                    </div>
                </div>
            </div>
            
            <!-- Region Selection Cards -->
            <div class="grid grid-cols-5 gap-4 mb-6">
                <div class="region-card selected" style="--region-color: #EC4899;" onclick="selectRegion(this, 'hk')" data-region="hk">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">ğŸ‡­ğŸ‡°</span>
                        <div>
                            <div class="font-bold text-pink-400">é¦™æ¸¯</div>
                            <div class="text-[11px] text-gray-400">107 æ‰€å­¸æ ¡</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å¹³å‡åˆ†</span>
                            <span class="font-bold text-pink-400 highlight-value">77.2</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">åŠæ ¼ç‡</span>
                            <span class="font-semibold">91.5%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å„ªç§€ç‡</span>
                            <span class="font-semibold">32.8%</span>
                        </div>
                    </div>
                </div>
                
                <div class="region-card selected" style="--region-color: #F97316;" onclick="selectRegion(this, 'gba')" data-region="gba">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">ğŸ™ï¸</span>
                        <div>
                            <div class="font-bold text-orange-400">å¤§ç£å€å…§åœ°</div>
                            <div class="text-[11px] text-gray-400">12 æ‰€å­¸æ ¡</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å¹³å‡åˆ†</span>
                            <span class="font-bold text-orange-400 highlight-value">78.5</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">åŠæ ¼ç‡</span>
                            <span class="font-semibold">89.2%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å„ªç§€ç‡</span>
                            <span class="font-semibold">35.2%</span>
                        </div>
                    </div>
                </div>
                
                <div class="region-card selected" style="--region-color: #3B82F6;" onclick="selectRegion(this, 'sh')" data-region="sh">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">ğŸŒŸ</span>
                        <div>
                            <div class="font-bold text-blue-400">ä¸Šæµ·</div>
                            <div class="text-[11px] text-gray-400">21 æ‰€å­¸æ ¡</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å¹³å‡åˆ†</span>
                            <span class="font-bold text-blue-400 highlight-value">82.3</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">åŠæ ¼ç‡</span>
                            <span class="font-semibold">93.8%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å„ªç§€ç‡</span>
                            <span class="font-semibold">42.5%</span>
                        </div>
                    </div>
                </div>
                
                <div class="region-card" style="--region-color: #22C55E;" onclick="selectRegion(this, 'cq')" data-region="cq">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">ğŸ”ï¸</span>
                        <div>
                            <div class="font-bold text-emerald-400">é‡æ…¶</div>
                            <div class="text-[11px] text-gray-400">5 æ‰€å­¸æ ¡</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å¹³å‡åˆ†</span>
                            <span class="font-bold text-emerald-400 highlight-value">75.8</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">åŠæ ¼ç‡</span>
                            <span class="font-semibold">88.5%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å„ªç§€ç‡</span>
                            <span class="font-semibold">28.9%</span>
                        </div>
                    </div>
                </div>
                
                <div class="region-card" style="--region-color: #A855F7;" onclick="selectRegion(this, 'mo')" data-region="mo">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="text-2xl">ğŸ‡²ğŸ‡´</span>
                        <div>
                            <div class="font-bold text-purple-400">æ¾³é–€</div>
                            <div class="text-[11px] text-gray-400">3 æ‰€å­¸æ ¡</div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å¹³å‡åˆ†</span>
                            <span class="font-bold text-purple-400 highlight-value">74.6</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">åŠæ ¼ç‡</span>
                            <span class="font-semibold">87.2%</span>
                        </div>
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-400">å„ªç§€ç‡</span>
                            <span class="font-semibold">26.5%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Comparison Bars -->
            <div class="grid grid-cols-3 gap-6 mb-6">
                <div class="metric-card">
                    <h4 class="text-sm font-semibold mb-4 flex items-center gap-2">
                        <i class="fas fa-star text-amber-400 text-xs"></i>
                        å¹³å‡åˆ†æ•¸å°æ¯”
                    </h4>
                    <div class="space-y-3" id="scoreCompare">
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-pink-400 font-medium">é¦™æ¸¯</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-pink-500" style="width: 77.2%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">77.2</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-orange-400 font-medium">å¤§ç£å€</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-orange-500" style="width: 78.5%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">78.5</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-blue-400 font-medium">ä¸Šæµ·</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-blue-500" style="width: 82.3%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">82.3</span>
                        </div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <h4 class="text-sm font-semibold mb-4 flex items-center gap-2">
                        <i class="fas fa-check-circle text-emerald-400 text-xs"></i>
                        åŠæ ¼ç‡å°æ¯”
                    </h4>
                    <div class="space-y-3" id="passCompare">
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-pink-400 font-medium">é¦™æ¸¯</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-pink-500" style="width: 91.5%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">91.5%</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-orange-400 font-medium">å¤§ç£å€</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-orange-500" style="width: 89.2%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">89.2%</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-blue-400 font-medium">ä¸Šæµ·</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-blue-500" style="width: 93.8%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">93.8%</span>
                        </div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <h4 class="text-sm font-semibold mb-4 flex items-center gap-2">
                        <i class="fas fa-trophy text-purple-400 text-xs"></i>
                        å„ªç§€ç‡å°æ¯”
                    </h4>
                    <div class="space-y-3" id="excellentCompare">
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-pink-400 font-medium">é¦™æ¸¯</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-pink-500" style="width: 65.6%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">32.8%</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-orange-400 font-medium">å¤§ç£å€</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-orange-500" style="width: 70.4%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">35.2%</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="w-16 text-xs text-blue-400 font-medium">ä¸Šæµ·</span>
                            <div class="flex-1 compare-bar"><div class="compare-bar-fill bg-blue-500" style="width: 85%;"></div></div>
                            <span class="w-10 text-xs font-bold text-right">42.5%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Learning Analysis & Rankings -->
        <div class="grid grid-cols-12 gap-5 mb-5">
            <!-- Learning Analysis -->
            <div class="col-span-7 glass-card rounded-xl p-5 neon-border relative">
                <div class="flex items-center justify-between mb-5">
                    <div class="section-title mb-0">
                        <div class="icon-box bg-indigo-500/20"><i class="fas fa-chart-radar text-indigo-400"></i></div>
                        <div>
                            <h2 class="text-lg font-bold">å­¸ç¿’ç¯„ç–‡è¡¨ç¾åˆ†æ</h2>
                            <p class="text-xs text-gray-400">æŒ‰é¦™æ¸¯æ•™è‚²å±€æ•¸å­¸èª²ç¨‹æ¡†æ¶</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div class="flex space-x-1 bg-white/5 rounded-lg p-1">
                            <button class="level-tab active" id="primaryTab" onclick="switchLevel('primary')">å°å­¸</button>
                            <button class="level-tab" id="secondaryTab" onclick="switchLevel('secondary')">ä¸­å­¸</button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-5">
                    <div class="metric-card">
                        <h3 class="text-xs font-semibold mb-3 text-gray-300">å­¸ç¿’ç¯„ç–‡é›·é”</h3>
                        <div style="height: 200px;"><canvas id="areaRadarChart"></canvas></div>
                    </div>
                    <div class="metric-card">
                        <h3 class="text-xs font-semibold mb-3 text-gray-300">å–®å…ƒè¡¨ç¾å°æ¯”</h3>
                        <div style="height: 200px;"><canvas id="unitBarChart"></canvas></div>
                    </div>
                </div>
                
                <div class="flex justify-center gap-8 mt-4 py-3 bg-white/3 rounded-lg">
                    <span class="flex items-center gap-2 text-sm">
                        <span class="w-4 h-4 rounded bg-pink-500"></span>
                        <span class="text-pink-400 font-medium">é¦™æ¸¯</span>
                    </span>
                    <span class="flex items-center gap-2 text-sm">
                        <span class="w-4 h-4 rounded bg-orange-500"></span>
                        <span class="text-orange-400 font-medium">å¤§ç£å€</span>
                    </span>
                    <span class="flex items-center gap-2 text-sm">
                        <span class="w-4 h-4 rounded bg-blue-500"></span>
                        <span class="text-blue-400 font-medium">ä¸Šæµ·</span>
                    </span>
                </div>
                
                <!-- Learning Areas -->
                <div class="mt-4" id="primaryAreaDesc">
                    <div class="grid grid-cols-5 gap-2">
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5 hover:border-purple-500/30 transition-all cursor-pointer">
                            <div class="w-9 h-9 mx-auto mb-2 rounded-lg bg-blue-500/20 flex items-center justify-center font-bold text-blue-400">N</div>
                            <span class="text-[11px] font-medium">æ•¸</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5 hover:border-purple-500/30 transition-all cursor-pointer">
                            <div class="w-9 h-9 mx-auto mb-2 rounded-lg bg-purple-500/20 flex items-center justify-center font-bold text-purple-400">A</div>
                            <span class="text-[11px] font-medium">ä»£æ•¸</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5 hover:border-purple-500/30 transition-all cursor-pointer">
                            <div class="w-9 h-9 mx-auto mb-2 rounded-lg bg-emerald-500/20 flex items-center justify-center font-bold text-emerald-400">M</div>
                            <span class="text-[11px] font-medium">åº¦é‡</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5 hover:border-purple-500/30 transition-all cursor-pointer">
                            <div class="w-9 h-9 mx-auto mb-2 rounded-lg bg-amber-500/20 flex items-center justify-center font-bold text-amber-400">S</div>
                            <span class="text-[11px] font-medium">åœ–å½¢ç©ºé–“</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5 hover:border-purple-500/30 transition-all cursor-pointer">
                            <div class="w-9 h-9 mx-auto mb-2 rounded-lg bg-pink-500/20 flex items-center justify-center font-bold text-pink-400">D</div>
                            <span class="text-[11px] font-medium">æ•¸æ“š</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4 hidden" id="secondaryAreaDesc">
                    <div class="grid grid-cols-3 gap-3">
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5">
                            <div class="w-10 h-10 mx-auto mb-2 rounded-lg bg-blue-500/20 flex items-center justify-center font-bold text-blue-400 text-lg">A</div>
                            <span class="text-xs font-medium">æ•¸èˆ‡ä»£æ•¸</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5">
                            <div class="w-10 h-10 mx-auto mb-2 rounded-lg bg-emerald-500/20 flex items-center justify-center font-bold text-emerald-400 text-lg">S</div>
                            <span class="text-xs font-medium">åº¦é‡åœ–å½¢ç©ºé–“</span>
                        </div>
                        <div class="text-center p-3 bg-white/3 rounded-lg border border-white/5">
                            <div class="w-10 h-10 mx-auto mb-2 rounded-lg bg-pink-500/20 flex items-center justify-center font-bold text-pink-400 text-lg">D</div>
                            <span class="text-xs font-medium">æ•¸æ“šè™•ç†</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Rankings -->
            <div class="col-span-5 glass-card rounded-xl p-5 neon-border relative">
                <div class="section-title">
                    <div class="icon-box bg-amber-500/20"><i class="fas fa-trophy text-amber-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">å­¸æ ¡æ’è¡Œæ¦œ TOP 10</h2>
                        <p class="text-xs text-gray-400">åˆè³½å¹³å‡åˆ†æ’å</p>
                    </div>
                </div>
                
                <div class="space-y-2 max-h-[420px] overflow-auto scrollbar-thin pr-1">
                    <div class="ranking-item flex items-center justify-between bg-gradient-to-r from-amber-500/15 to-transparent rounded-lg p-3">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center text-sm font-bold">1</div>
                            <div>
                                <span class="font-semibold text-sm">è–å…¬æœƒå¾·ç”°æå…†å¼·å°å­¸</span>
                                <p class="text-[11px] text-gray-400">ğŸ‡­ğŸ‡° é¦™æ¸¯</p>
                            </div>
                        </div>
                        <span class="text-lg font-bold text-amber-400">92.3</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-gradient-to-r from-gray-400/10 to-transparent rounded-lg p-3">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-gray-300 to-gray-500 rounded-lg flex items-center justify-center text-sm font-bold">2</div>
                            <div><span class="font-semibold text-sm">æ‹”èƒå¥³å°å­¸</span><p class="text-[11px] text-gray-400">ğŸ‡­ğŸ‡° é¦™æ¸¯</p></div>
                        </div>
                        <span class="text-lg font-bold text-gray-300">91.8</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-gradient-to-r from-orange-600/10 to-transparent rounded-lg p-3">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-700 rounded-lg flex items-center justify-center text-sm font-bold">3</div>
                            <div><span class="font-semibold text-sm">é¦™æ¸¯åŸ¹æ­£å°å­¸</span><p class="text-[11px] text-gray-400">ğŸ‡­ğŸ‡° é¦™æ¸¯</p></div>
                        </div>
                        <span class="text-lg font-bold text-orange-400">90.5</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">4</div><div><span class="font-medium text-sm">ä¸Šæµ·å¸‚æ°‘åŠå®æ˜Ÿå°å­¦</span><p class="text-[11px] text-gray-500">ğŸ‡¨ğŸ‡³ ä¸Šæµ·</p></div></div><span class="font-bold">89.7</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">5</div><div><span class="font-medium text-sm">ç‘ªåˆ©è«¾ä¿®é™¢å­¸æ ¡(å°å­¸éƒ¨)</span><p class="text-[11px] text-gray-500">ğŸ‡­ğŸ‡° é¦™æ¸¯</p></div></div><span class="font-bold">88.9</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">6</div><div><span class="font-medium text-sm">æ¸¯å¤§åŒå­¸æœƒå°å­¸</span><p class="text-[11px] text-gray-500">ğŸ‡­ğŸ‡° é¦™æ¸¯</p></div></div><span class="font-bold">88.5</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">7</div><div><span class="font-medium text-sm">é‡åº†å¸‚å·´èœ€å°å­¦æ ¡</span><p class="text-[11px] text-gray-500">ğŸ‡¨ğŸ‡³ é‡æ…¶</p></div></div><span class="font-bold">87.8</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">8</div><div><span class="font-medium text-sm">æ·±åœ³å‰æµ·å“ˆç½—æ¸¯äººå­å¼Ÿå­¦æ ¡</span><p class="text-[11px] text-gray-500">ğŸ‡¨ğŸ‡³ æ·±åœ³</p></div></div><span class="font-bold">87.2</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">9</div><div><span class="font-medium text-sm">æ¾³é–€åŸ¹æ­£ä¸­å­¸</span><p class="text-[11px] text-gray-500">ğŸ‡²ğŸ‡´ æ¾³é–€</p></div></div><span class="font-bold">86.9</span>
                    </div>
                    
                    <div class="ranking-item flex items-center justify-between bg-white/3 rounded-lg p-3">
                        <div class="flex items-center gap-3"><div class="w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center font-semibold">10</div><div><span class="font-medium text-sm">æ°‘ç”Ÿæ›¸é™¢å°å­¸</span><p class="text-[11px] text-gray-500">ğŸ‡­ğŸ‡° é¦™æ¸¯</p></div></div><span class="font-bold">86.5</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- School Query -->
        <div class="glass-card rounded-xl p-5 neon-border mb-5 relative">
            <div class="section-title">
                <div class="icon-box bg-pink-500/20"><i class="fas fa-search text-pink-400"></i></div>
                <div>
                    <h2 class="text-lg font-bold">å­¸æ ¡å¹´ç´šæ•¸æ“šæŸ¥è©¢</h2>
                    <p class="text-xs text-gray-400">æŸ¥è©¢å„æ ¡å„å¹´ç´šè©³ç´°è¡¨ç¾</p>
                </div>
            </div>
            
            <div class="grid grid-cols-4 gap-4 mb-5">
                <div>
                    <label class="text-xs text-gray-400 mb-2 block">é¸æ“‡åŸå¸‚/åœ°å€</label>
                    <select id="citySelect" class="school-select w-full" onchange="onCityChange()">
                        <option value="hk_primary">é¦™æ¸¯ - å°å­¸ (50æ‰€)</option>
                        <option value="hk_secondary">é¦™æ¸¯ - ä¸­å­¸ (57æ‰€)</option>
                        <option value="sz">æ·±åœ³ (8æ‰€)</option>
                        <option value="gz">å»£å· (2æ‰€)</option>
                        <option value="mo">æ¾³é–€ (3æ‰€)</option>
                        <option value="sh">ä¸Šæµ· (21æ‰€)</option>
                        <option value="cq">é‡æ…¶ (5æ‰€)</option>
                    </select>
                </div>
                <div>
                    <label class="text-xs text-gray-400 mb-2 block">é¸æ“‡å­¸æ ¡</label>
                    <select id="schoolSelect" class="school-select w-full" onchange="onSchoolChange()">
                        <option value="">è«‹é¸æ“‡å­¸æ ¡...</option>
                    </select>
                </div>
                <div id="gradeSection" class="hidden col-span-2">
                    <label class="text-xs text-gray-400 mb-2 block">é¸æ“‡å¹´ç´š</label>
                    <div id="gradeButtons" class="flex flex-wrap gap-2"></div>
                </div>
            </div>

            <div id="schoolStats" class="hidden">
                <div class="grid grid-cols-5 gap-3 mb-5">
                    <div class="metric-card text-center"><div class="text-2xl font-bold text-blue-400" id="statStudents">-</div><div class="text-[11px] text-gray-400 mt-1">å­¸ç”Ÿäººæ•¸</div></div>
                    <div class="metric-card text-center"><div class="text-2xl font-bold text-emerald-400" id="statAvgScore">-</div><div class="text-[11px] text-gray-400 mt-1">å¹³å‡åˆ†æ•¸</div></div>
                    <div class="metric-card text-center"><div class="text-2xl font-bold text-purple-400" id="statPassRate">-</div><div class="text-[11px] text-gray-400 mt-1">åŠæ ¼ç‡</div></div>
                    <div class="metric-card text-center"><div class="text-2xl font-bold text-amber-400" id="statExcellent">-</div><div class="text-[11px] text-gray-400 mt-1">å„ªç§€ç‡</div></div>
                    <div class="metric-card text-center"><div class="text-2xl font-bold text-cyan-400" id="statRank">-</div><div class="text-[11px] text-gray-400 mt-1">å€åŸŸæ’å</div></div>
                </div>
                <div class="grid grid-cols-2 gap-5">
                    <div class="metric-card"><h3 class="text-xs font-semibold mb-3 text-gray-300 flex items-center gap-2"><i class="fas fa-chart-bar text-purple-400"></i>å„å¹´ç´šå¹³å‡åˆ†</h3><div style="height: 140px;"><canvas id="gradeChart"></canvas></div></div>
                    <div class="metric-card"><h3 class="text-xs font-semibold mb-3 text-gray-300 flex items-center gap-2"><i class="fas fa-table text-cyan-400"></i>å¹´ç´šè©³ç´°æ•¸æ“š</h3><div class="overflow-auto max-h-[140px] scrollbar-thin"><table class="data-table"><thead><tr><th>å¹´ç´š</th><th>äººæ•¸</th><th>å¹³å‡åˆ†</th><th>åŠæ ¼ç‡</th></tr></thead><tbody id="gradeTableBody"></tbody></table></div></div>
                </div>
            </div>
        </div>

        <!-- Score Distribution & Info -->
        <div class="grid grid-cols-12 gap-5">
            <div class="col-span-5 glass-card rounded-xl p-5 neon-border relative">
                <div class="section-title">
                    <div class="icon-box bg-purple-500/20"><i class="fas fa-chart-pie text-purple-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">å…¨åœ‹æˆç¸¾åˆ†å¸ƒ</h2>
                        <p class="text-xs text-gray-400">åˆè³½æˆç¸¾ç­‰ç´šçµ±è¨ˆ</p>
                    </div>
                </div>
                <div class="flex items-center gap-5">
                    <div style="height: 180px; width: 180px;"><canvas id="distributionChart"></canvas></div>
                    <div class="flex-1 space-y-2">
                        <div class="flex items-center justify-between p-2 rounded-lg bg-purple-500/10 border-l-2 border-purple-500">
                            <span class="text-xs">å“è¶Š 90-100</span>
                            <span class="text-xs font-bold text-purple-400">8.2% (976äºº)</span>
                        </div>
                        <div class="flex items-center justify-between p-2 rounded-lg bg-blue-500/10 border-l-2 border-blue-500">
                            <span class="text-xs">å„ªç§€ 80-89</span>
                            <span class="text-xs font-bold text-blue-400">22.5% (2,678äºº)</span>
                        </div>
                        <div class="flex items-center justify-between p-2 rounded-lg bg-emerald-500/10 border-l-2 border-emerald-500">
                            <span class="text-xs">è‰¯å¥½ 70-79</span>
                            <span class="text-xs font-bold text-emerald-400">35.8% (4,260äºº)</span>
                        </div>
                        <div class="flex items-center justify-between p-2 rounded-lg bg-amber-500/10 border-l-2 border-amber-500">
                            <span class="text-xs">åŠæ ¼ 60-69</span>
                            <span class="text-xs font-bold text-amber-400">24.3% (2,892äºº)</span>
                        </div>
                        <div class="flex items-center justify-between p-2 rounded-lg bg-red-500/10 border-l-2 border-red-500">
                            <span class="text-xs">å¾…åŠ å¼· &lt;60</span>
                            <span class="text-xs font-bold text-red-400">9.2% (1,094äºº)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-span-4 glass-card rounded-xl p-5 neon-border relative">
                <div class="section-title">
                    <div class="icon-box bg-cyan-500/20"><i class="fas fa-award text-cyan-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">çé …è¨­ç½®</h2>
                        <p class="text-xs text-gray-400">æ±ºè³½çå‹µåˆ†é…</p>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <div class="text-center p-4 bg-gradient-to-b from-amber-500/15 to-transparent rounded-xl border border-amber-500/20">
                        <div class="text-3xl mb-2">ğŸ¥‡</div>
                        <div class="font-bold text-amber-400">é‡‘ç</div>
                        <div class="text-xs text-gray-400 mt-1">TOP 5%</div>
                        <div class="text-lg font-bold mt-2">64äºº</div>
                    </div>
                    <div class="text-center p-4 bg-gradient-to-b from-gray-400/15 to-transparent rounded-xl border border-gray-400/20">
                        <div class="text-3xl mb-2">ğŸ¥ˆ</div>
                        <div class="font-bold text-gray-300">éŠ€ç</div>
                        <div class="text-xs text-gray-400 mt-1">TOP 15%</div>
                        <div class="text-lg font-bold mt-2">192äºº</div>
                    </div>
                    <div class="text-center p-4 bg-gradient-to-b from-orange-600/15 to-transparent rounded-xl border border-orange-600/20">
                        <div class="text-3xl mb-2">ğŸ¥‰</div>
                        <div class="font-bold text-orange-400">éŠ…ç</div>
                        <div class="text-xs text-gray-400 mt-1">TOP 30%</div>
                        <div class="text-lg font-bold mt-2">383äºº</div>
                    </div>
                </div>
                <div class="mt-4 p-3 bg-purple-500/10 rounded-lg border border-purple-500/20">
                    <div class="flex items-center gap-2 text-sm">
                        <i class="fas fa-certificate text-purple-400"></i>
                        <span>æ‰€æœ‰åƒè³½è€…å‡ç²é ’é›»å­è­‰æ›¸</span>
                    </div>
                </div>
            </div>
            
            <div class="col-span-3 glass-card rounded-xl p-5 neon-border relative">
                <div class="section-title">
                    <div class="icon-box bg-emerald-500/20"><i class="fas fa-robot text-emerald-400"></i></div>
                    <div>
                        <h2 class="text-lg font-bold">AI è©•æ¸¬ç³»çµ±</h2>
                        <p class="text-xs text-gray-400">æ ¸å¿ƒæŠ€è¡“æŒ‡æ¨™</p>
                    </div>
                </div>
                <div class="space-y-3">
                    <div class="flex items-center justify-between p-3 bg-white/3 rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center">
                                <i class="fas fa-bullseye text-emerald-400 text-sm"></i>
                            </div>
                            <span class="text-sm">AI æº–ç¢ºåº¦</span>
                        </div>
                        <span class="text-xl font-bold text-emerald-400">92%</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-white/3 rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center">
                                <i class="fas fa-database text-blue-400 text-sm"></i>
                            </div>
                            <span class="text-sm">é¡Œåº«æ•¸é‡</span>
                        </div>
                        <span class="text-xl font-bold text-blue-400">5,000+</span>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-white/3 rounded-lg">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center">
                                <i class="fas fa-clock text-purple-400 text-sm"></i>
                            </div>
                            <span class="text-sm">å³æ™‚å ±å‘Š</span>
                        </div>
                        <span class="text-xl font-bold text-purple-400">&lt;3ç§’</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="glass-card mt-5 py-5 border-t border-white/5 relative">
        <div class="max-w-[1920px] mx-auto px-6 flex items-center justify-between">
            <div class="flex items-center gap-5">
                <div class="flex items-center gap-3">
                    <div class="w-9 h-9 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center"><i class="fas fa-cube text-sm"></i></div>
                    <div>
                        <div class="text-sm font-semibold">Infinity Lab R&D Limited</div>
                        <div class="text-[11px] text-gray-500">é¦™æ¸¯æ•¸ç¢¼æ¸¯åŸ¹è‚²ä¼æ¥­</div>
                    </div>
                </div>
                <div class="h-6 w-px bg-white/10"></div>
                <div class="text-xs text-gray-400"><i class="fas fa-envelope text-purple-400 mr-2"></i>contact@practifly.ai</div>
            </div>
            <div class="flex items-center gap-5 text-xs text-gray-400">
                <span>è³‡æ–™æ›´æ–°ï¼š<span id="updateTime" class="text-white font-medium"></span></span>
                <span>Â© 2025 Practifly AI. All Rights Reserved.</span>
            </div>
        </div>
    </footer>

    <script>
        // School Data
        const schoolsData = {
            hk_primary: ['ä¸­è¯åŸºç£æ•™æœƒå”å’Œå°å­¸(é•·æ²™ç£)', 'æ‹”èƒå¥³å°å­¸', 'æµ¸ä¿¡å®£é“æœƒå‘‚æ˜æ‰å°å­¸', 'å˜‰è«¾æ’’è–å®¶å­¸æ ¡', 'ç‘ªåˆ©è«¾ä¿®é™¢å­¸æ ¡(å°å­¸éƒ¨)', 'æ°‘ç”Ÿæ›¸é™¢å°å­¸', 'æ¸¯å¤§åŒå­¸æœƒå°å­¸', 'é¦™æ¸¯åŸ¹æ­£å°å­¸', 'åŸºç£æ•™å®£é“æœƒå®£åŸºå°å­¸', 'è–å…¬æœƒç‰§æ„›å°å­¸', 'å¤§å‘æ±å®£é“å°å­¸', 'ä»æ„›å ‚åŠ‰çš‡ç™¼å¤«äººå°å­¸', 'ä¹é¾åŸæµ¸ä¿¡æœƒç¦§å¹´(æ©å¹³)å°å­¸', 'ä¸­è¯åŸºç£æ•™æœƒåŸºæ…§å°å­¸(é¦¬ç£)', 'è–å…¬æœƒå¾·ç”°æå…†å¼·å°å­¸', 'åŸºç£æ•™ç¥å¬æœƒæ¢çœå¾·å°å­¸', 'å„ªæ‰(æ¥Šæ®·æœ‰å¨£)æ›¸é™¢', 'è–å…¬æœƒä¸»é¢¨å°å­¸', 'åŸºç£æ•™åŸ¹æ©å°å­¸', 'ä¸­è¯åŸºç£æ•™æœƒç£ä»”å ‚åŸºé“å°å­¸(ä¹é¾åŸ)', 'å˜‰è«¾æ’’å°å­¸(æ–°è’²å´—)', 'ä»æ¿Ÿé†«é™¢é™³è€€æ˜Ÿå°å­¸', 'é¦™æ¸¯é“æ•™è¯åˆæœƒåœ“ç„å­¸é™¢é™³å‘‚é‡å¾·ç´€å¿µå­¸æ ¡', 'åšæ„›é†«é™¢æ­·å±†ç¸½ç†è¯èª¼æœƒé„­ä»»å®‰å¤«äººå­¸æ ¡', 'å—‡è‰²åœ’ä¸»è¾¦å¯ä¿¡å­¸æ ¡', 'è–å…¬æœƒå¥‰åŸºå°å­¸', 'æ›¾æ¢…åƒç¦§å­¸æ ¡', 'è–å…¬æœƒè–é¦¬å¤ªå°å­¸', 'ä»æ¿Ÿé†«é™¢ç¾…é™³æ¥šæ€å°å­¸', 'æ»¬æ±Ÿå°å­¸', 'å—å…ƒæœ—å®˜ç«‹å°å­¸', 'æ±è¯ä¸‰é™¢æ¸¯ä¹é›»å™¨å•†è¯æœƒå°å­¸', 'è–å…¬æœƒç”°ç£å§‹å—å°å­¸', 'å¤©ä¸»æ•™è–å®‰å¾·è‚‹å°å­¸', 'ç¦å»ºä¸­å­¸é™„å±¬å­¸æ ¡', 'ä»å¾·å¤©ä¸»æ•™å°å­¸', 'èƒç£å•†æœƒå­¸æ ¡', 'è¿¦å¯†æ¢çœå¾·å­¸æ ¡', 'è–æ„›å¾·è¯å¤©ä¸»æ•™å°å­¸', 'è–å…¬æœƒåŸºé¡¯å°å­¸', 'è§€å¡˜å®˜ç«‹å°å­¸', 'å¤©ä¸»æ•™æŸå¾·å­¸æ ¡', 'é›²æ³‰å­¸æ ¡', 'ä½›æ•™æ…ˆæ•¬å­¸æ ¡', 'å¶ºå—å¤§å­¸é¦™æ¸¯åŒå­¸æœƒå°å­¸', 'å•ŸåŸºå­¸æ ¡', 'è–æ¯ç„¡ç·è–å¿ƒå­¸æ ¡', 'å¼µæŒ¯èˆˆä¼‰å„·æ›¸é™¢', 'è–æ¯ç„¡ç·è–å¿ƒæ›¸é™¢', 'é¦™æ¸¯ä¸­æ–‡å¤§å­¸æ ¡å‹æœƒè¯æœƒå¼µç…Šæ˜Œå­¸æ ¡'],
            hk_secondary: ['è–ä¼¯å¤šç¥¿ä¸­å­¸', 'é¦™æ¸¯ä¸­æ–‡å¤§å­¸æ ¡å‹æœƒè¯æœƒå¼µç…Šæ˜Œä¸­å­¸', 'å¯ç«‹ä¸­å­¸(å—‡è‰²åœ’ä¸»è¾¦)', 'æµ¸ä¿¡æœƒå‘‚æ˜æ‰ä¸­å­¸', 'å˜‰è«¾æ’’è–å¿ƒæ›¸é™¢', 'è–ç¾…æ’’æ›¸é™¢', 'åŸºç£æ•™é¦™æ¸¯ä¿¡ç¾©æœƒå…ƒæœ—ä¿¡ç¾©ä¸­å­¸', 'ä¿è‰¯å±€ç¾…æ°åŸºé‡‘ä¸­å­¸', 'è¿¦å¯†ä¸­å­¸', 'å» å•†æœƒä¸­å­¸', 'æ°‘ç”Ÿæ›¸é™¢', 'è¬éˆåŒ¯çŸ¥ä¸­å­¸', 'é¦™æµ·æ­£è¦ºè“®ç¤¾ä½›æ•™æ­£è¦ºä¸­å­¸', 'æ»¬æ±Ÿç¶­å¤šåˆ©äºå­¸æ ¡', 'è¡›ç†ä¸­å­¸', 'æ—…æ¸¯é–‹å¹³å•†æœƒå­¸æ ¡', 'å˜‰è«¾æ’’è–å¿ƒè‹±æ–‡ä¸­å­¸', 'ä»æ¿Ÿé†«é™¢ç¾…é™³æ¥šæ€ä¸­å­¸', 'å‘‚éƒ­ç¢§é³³ä¸­å­¸', 'å¯§æ³¢å…¬å­¸'],
            sz: ['æ·±åœ³å‰æµ·å“ˆç½—æ¸¯äººå­å¼Ÿå­¦æ ¡', 'æ·±åœ³å¸‚å—å±±ä¸­è‹±æ–‡å­¦æ ¡', 'æ·±åœ³å¸‚æ–°ç¦æ™¯åŒè¯­å­¦æ ¡', 'æ·±åœ³å¸‚ç½—æ¹–åŒºåç¾å¤–å›½è¯­å­¦æ ¡', 'é¦™æ¸¯ä¸­æ–‡å¤§å­¸ï¼ˆæ·±åœ³ï¼‰é™„å±¬é“é å­¸æ ¡', 'é¦™æ¸¯ä¸­æ–‡å¤§å­¸ï¼ˆæ·±åœ³ï¼‰é™„å±¬ç¦®æ–‡å­¸æ ¡', 'é¦™æ¸¯ä¸­æ–‡å¤§å­¸ï¼ˆæ·±åœ³ï¼‰é™„å±¬çŸ¥æ–°å­¸æ ¡', 'æ·±åœ³å¸‚æ±‰å¼€æ•°ç†é«˜ä¸­'],
            gz: ['å»£å·æš¨å¤§æ¸¯æ¾³å­å¼Ÿå­¦æ ¡', 'å»£å·å¸‚ä¸­é»ƒæ¸¯æ¾³å­å¼Ÿå­¸æ ¡'],
            mo: ['æ¾³é–€åŸ¹æ­£ä¸­å­¸', 'æ¾³é–€å¤§å­¸é™„å±¬æ‡‰ç”¨å­¸æ ¡', 'æ¾³é–€å˜‰è«¾æ’’è–å¿ƒè‹±æ–‡ä¸­å­¸'],
            sh: ['ä¸Šæµ·å¸‚æ°‘åŠå®æ˜Ÿå°å­¦', 'ä¸Šæµ·å¸‚æ°‘åŠä¸½è‹±å°å­¦', 'ä¸Šæµ·å¸‚æ°‘åŠå°šå¤–å¤–å›½è¯­å°å­¦', 'ä¸Šæµ·åšä¸–å‡¯å¤–å›½è¯­å­¦æ ¡', 'ä¸Šæµ·å¸‚æ°‘åŠå—æ¨¡ä¸­å­¦', 'ä¸Šæµ·å¸‚æ°‘åŠæ–°å¤å…´åˆçº§ä¸­å­¦', 'ä¸Šæµ·é’æµ¦åŒºä¸–å¤–å­¦æ ¡', 'ä¸Šæµ·å¸‚è™¹å£åŒºæ›²é˜³ç¬¬å››å°å­¦', 'ä¸Šæµ·å¸‚è™¹å£åŒºå¹¿çµè·¯å°å­¦', 'ä¸Šæµ·å¸‚è™¹å£åŒºç¬¬å››ä¸­å¿ƒå°å­¦', 'ä¸Šæµ·å¸‚è™¹å£åŒºæ–°å®æ˜Ÿå°å­¦', 'ä¸Šæµ·è™¹å£åŒºå¤å…´å®éªŒå°å­¦', 'ä¸Šæµ·å¤–å›½è¯­å¤§å­¦é™„å±å¤–å›½è¯­å°å­¦', 'ä¸Šæµ·å¸‚è¿›æ‰å®éªŒå°å­¦', 'è™¹å£åŒºä¸­å·è·¯ç¬¬ä¸€å°å­¦', 'ä¸Šæµ·å¸‚åä¸œå¸ˆå¤§ä¸€é™„ä¸­å®éªŒå°å­¦', 'ä¸Šæµ·å¸‚çº¢æ——å°å­¦', 'ä¸Šæµ·å¸‚è™¹å£åŒºå¤–å›½è¯­ç¬¬äºŒå°å­¦', 'ä¸Šæµ·å¸‚è™¹å£åŒºç¬¬ä¸‰ä¸­å¿ƒå°å­¦', 'ä¸Šæµ·æµ¦ä¸œæ–°åŒºç«¹å›­å°å­¦', 'ä¸Šæµ·å¸‚ç¬¬äºŒå¸ˆèŒƒå­¦æ ¡é™„å±å°å­¦'],
            cq: ['é‡åº†å¸‚å·´èœ€å°å­¦æ ¡', 'é‡åº†å¸‚è“æ¹–éƒ¡å·´èœ€å°å­¦', 'é‡åº†å¸‚æ¸åŒ—åŒºé²èƒ½å·´èœ€å°å­¦æ ¡', 'é‡åº†å¸‚æ¸åŒ—å·´èœ€å°å­¦', 'é‡åº†ä¸¤æ±Ÿæ–°åŒºå·´èœ€å—æ¹–éƒ¡å°å­¦']
        };

        // Chart Data with clear differences
        const primaryAreaData = { hk: [78, 65, 82, 70, 85], gba: [85, 72, 88, 80, 82], sh: [90, 78, 92, 85, 88] };
        const secondaryAreaData = { hk: [72, 80, 82], gba: [80, 85, 78], sh: [86, 90, 85] };
        const primaryUnitData = { hk: [70, 82, 65, 75, 85, 62, 88], gba: [80, 88, 75, 82, 82, 72, 85], sh: [88, 92, 82, 88, 88, 80, 90] };
        const secondaryUnitData = { hk: [68, 75, 65, 72, 80, 82], gba: [78, 82, 72, 80, 85, 80], sh: [85, 88, 80, 85, 90, 88] };

        let chinaMap, areaRadarChart, unitBarChart, gradeChart, distributionChart;
        let currentLevel = 'primary';
        let currentSchool = null;
        let selectedRegions = ['hk', 'gba', 'sh'];

        document.addEventListener('DOMContentLoaded', () => {
            animateCounter('totalSchools', 190, '+');
            animateCounter('totalParticipants', 11900, '+');
            animateCounter('semifinalCount', 5689, '');
            animateCounter('finalCount', 1278, '');
            updateTime();
            setInterval(updateTime, 1000);
            initChinaMap();
            initCharts();
            generateCityList();
            onCityChange();
        });

        function updateTime() {
            const now = new Date();
            document.getElementById('currentTime').textContent = now.toLocaleString('zh-HK');
            document.getElementById('updateTime').textContent = now.toLocaleString('zh-HK', { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' });
        }

        function animateCounter(id, target, suffix) {
            const el = document.getElementById(id);
            let current = 0;
            const step = target / 50;
            const timer = setInterval(() => {
                current += step;
                if (current >= target) { el.textContent = target.toLocaleString() + suffix; clearInterval(timer); }
                else { el.textContent = Math.floor(current).toLocaleString(); }
            }, 40);
        }

        function selectRegion(el, region) {
            el.classList.toggle('selected');
            if (el.classList.contains('selected')) {
                if (!selectedRegions.includes(region)) selectedRegions.push(region);
            } else {
                selectedRegions = selectedRegions.filter(r => r !== region);
            }
            updateComparisonBars();
        }

        function updateComparisonBars() {
            // This would update the comparison bars based on selected regions
        }

        function switchLevel(level) {
            currentLevel = level;
            document.getElementById('primaryTab').classList.toggle('active', level === 'primary');
            document.getElementById('secondaryTab').classList.toggle('active', level === 'secondary');
            document.getElementById('primaryAreaDesc').classList.toggle('hidden', level !== 'primary');
            document.getElementById('secondaryAreaDesc').classList.toggle('hidden', level !== 'secondary');
            updateCharts();
        }

        function updateCharts() {
            const areaData = currentLevel === 'primary' ? primaryAreaData : secondaryAreaData;
            const unitData = currentLevel === 'primary' ? primaryUnitData : secondaryUnitData;
            const areaLabels = currentLevel === 'primary' ? ['æ•¸', 'ä»£æ•¸', 'åº¦é‡', 'åœ–å½¢ç©ºé–“', 'æ•¸æ“š'] : ['æ•¸èˆ‡ä»£æ•¸', 'åº¦é‡åœ–å½¢ç©ºé–“', 'æ•¸æ“šè™•ç†'];
            const unitLabels = currentLevel === 'primary' ? ['20ä»¥å…§æ•¸', 'åŠ æ¸›æ³•', 'ä¹˜æ³•', 'é™¤æ³•', 'åˆ†æ•¸', 'å°æ•¸', 'æ™‚é–“'] : ['æœ‰å‘æ•¸', 'å¤šé …å¼', 'æ–¹ç¨‹', 'ä¸ç­‰å¼', 'ä¸‰è§’å­¸', 'æ¦‚ç‡'];
            
            areaRadarChart.data.labels = areaLabels;
            areaRadarChart.data.datasets[0].data = areaData.hk;
            areaRadarChart.data.datasets[1].data = areaData.gba;
            areaRadarChart.data.datasets[2].data = areaData.sh;
            areaRadarChart.update();
            
            unitBarChart.data.labels = unitLabels;
            unitBarChart.data.datasets[0].data = unitData.hk;
            unitBarChart.data.datasets[1].data = unitData.gba;
            unitBarChart.data.datasets[2].data = unitData.sh;
            unitBarChart.update();
        }

        function initChinaMap() {
            chinaMap = echarts.init(document.getElementById('chinaMap'));
            fetch('https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json').then(res => res.json()).then(geoJson => { echarts.registerMap('china', geoJson); renderMap(); }).catch(() => {});
            window.addEventListener('resize', () => chinaMap && chinaMap.resize());
        }

        function renderMap() {
            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'item', backgroundColor: 'rgba(20,20,40,0.95)', borderColor: '#8B7CB6', textStyle: { color: '#fff', fontSize: 13 }, formatter: (p) => p.data ? `<strong>${p.data.cityName}</strong><br/>å­¸æ ¡: ${p.data.schools} æ‰€<br/>å­¸ç”Ÿ: ${p.data.students}` : '' },
                geo: { map: 'china', roam: true, zoom: 1.2, center: [108, 34], itemStyle: { areaColor: 'rgba(139,124,182,0.08)', borderColor: 'rgba(139,124,182,0.3)' }, emphasis: { itemStyle: { areaColor: 'rgba(139,124,182,0.25)' } } },
                series: [{ type: 'scatter', coordinateSystem: 'geo', symbol: 'circle', symbolSize: (v) => Math.sqrt(v[2]) * 2.5 + 12, label: { show: true, formatter: '{b}', position: 'right', fontSize: 11, color: '#E5E7EB' }, itemStyle: { color: (p) => p.data.color, shadowBlur: 8, shadowColor: 'rgba(0,0,0,0.3)' },
                    data: [
                        { value: [114.17, 22.32, 107], name: 'é¦™æ¸¯', cityName: 'é¦™æ¸¯', schools: 107, students: '7,000', color: '#EC4899' },
                        { value: [113.55, 22.15, 3], name: 'æ¾³é–€', cityName: 'æ¾³é–€', schools: 3, students: '450', color: '#A855F7' },
                        { value: [114.07, 22.65, 8], name: 'æ·±åœ³', cityName: 'æ·±åœ³', schools: 8, students: '850', color: '#F97316' },
                        { value: [113.23, 23.35, 4], name: 'å»£ä½›', cityName: 'å»£å·Â·ä½›å±±', schools: 4, students: '600', color: '#F97316' },
                        { value: [121.48, 31.22, 21], name: 'ä¸Šæµ·', cityName: 'ä¸Šæµ·', schools: 21, students: '1,680', color: '#3B82F6' },
                        { value: [106.55, 29.57, 5], name: 'é‡æ…¶', cityName: 'é‡æ…¶', schools: 5, students: '620', color: '#22C55E' },
                        { value: [116.40, 39.90, 3], name: 'åŒ—äº¬', cityName: 'åŒ—äº¬', schools: 3, students: '350', color: '#6366F1' }
                    ]
                }]
            };
            chinaMap.setOption(option);
        }

        function switchView(view) {
            document.getElementById('mapTabBtn').classList.toggle('active', view === 'map');
            document.getElementById('listTabBtn').classList.toggle('active', view === 'list');
            document.getElementById('mapView').classList.toggle('hidden', view !== 'map');
            document.getElementById('listView').classList.toggle('hidden', view !== 'list');
            if (view === 'map' && chinaMap) chinaMap.resize();
        }

        function generateCityList() {
            const cities = [
                { name: 'é¦™æ¸¯å°å­¸', schools: 50, students: 3200, color: '#EC4899', key: 'hk_primary' },
                { name: 'é¦™æ¸¯ä¸­å­¸', schools: 57, students: 3800, color: '#EC4899', key: 'hk_secondary' },
                { name: 'æ·±åœ³', schools: 8, students: 850, color: '#F97316', key: 'sz' },
                { name: 'å»£å·', schools: 2, students: 280, color: '#F97316', key: 'gz' },
                { name: 'æ¾³é–€', schools: 3, students: 450, color: '#A855F7', key: 'mo' },
                { name: 'ä¸Šæµ·', schools: 21, students: 1680, color: '#3B82F6', key: 'sh' },
                { name: 'é‡æ…¶', schools: 5, students: 620, color: '#22C55E', key: 'cq' }
            ];
            const container = document.getElementById('cityListContainer');
            container.innerHTML = '';
            cities.forEach(city => {
                const div = document.createElement('div');
                div.className = 'p-4 bg-white/3 rounded-xl border border-white/5 hover:border-purple-500/30 cursor-pointer transition-all';
                div.innerHTML = `<div class="flex items-center gap-2 mb-2"><span class="w-3 h-3 rounded" style="background:${city.color}"></span><span class="font-semibold text-sm">${city.name}</span></div><div class="text-xs text-gray-400">${city.schools} æ‰€å­¸æ ¡ Â· ${city.students.toLocaleString()} å­¸ç”Ÿ</div>`;
                div.onclick = () => { document.getElementById('citySelect').value = city.key; onCityChange(); };
                container.appendChild(div);
            });
        }

        function onCityChange() {
            const key = document.getElementById('citySelect').value;
            const select = document.getElementById('schoolSelect');
            select.innerHTML = '<option value="">è«‹é¸æ“‡å­¸æ ¡...</option>';
            (schoolsData[key] || []).forEach((name, i) => {
                const opt = document.createElement('option');
                opt.value = `${key}_${i}`;
                opt.textContent = name;
                opt.dataset.name = name;
                select.appendChild(opt);
            });
            document.getElementById('gradeSection').classList.add('hidden');
            document.getElementById('schoolStats').classList.add('hidden');
        }

        function onSchoolChange() {
            const sel = document.getElementById('schoolSelect');
            if (!sel.value) { document.getElementById('gradeSection').classList.add('hidden'); document.getElementById('schoolStats').classList.add('hidden'); return; }
            const name = sel.options[sel.selectedIndex].dataset.name;
            const cityKey = document.getElementById('citySelect').value;
            let grades = (cityKey === 'hk_primary' || name.includes('å°å­¸') || name.includes('å°å­¦')) ? ['P1','P2','P3','P4','P5','P6'] : ['S1','S2','S3','S4','S5','S6'];
            currentSchool = { id: sel.value, name, grades };
            document.getElementById('gradeSection').classList.remove('hidden');
            const btns = document.getElementById('gradeButtons');
            btns.innerHTML = '';
            grades.forEach((g, i) => {
                const btn = document.createElement('button');
                btn.className = `grade-btn ${i === 0 ? 'active' : ''}`;
                btn.textContent = g;
                btn.onclick = () => { document.querySelectorAll('.grade-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); selectGrade(g); };
                btns.appendChild(btn);
            });
            selectGrade(grades[0]);
        }

        function generateGradeData(id, grade) {
            const seed = id.split('').reduce((a,c) => a + c.charCodeAt(0), 0) + grade.charCodeAt(1);
            const rand = (min, max) => { const x = Math.sin(seed * (min + max + 1)) * 10000; return Math.floor((x - Math.floor(x)) * (max - min + 1)) + min; };
            return { students: rand(28, 52), avgScore: Math.min(96, Math.max(58, 68 + rand(0, 22) + rand(-5, 8))), passRate: Math.min(100, Math.max(78, 82 + rand(0, 18))), excellentRate: Math.min(65, Math.max(18, 25 + rand(0, 32))), rank: rand(1, 40) };
        }

        function selectGrade(grade) {
            if (!currentSchool) return;
            document.getElementById('schoolStats').classList.remove('hidden');
            const data = generateGradeData(currentSchool.id, grade);
            document.getElementById('statStudents').textContent = data.students;
            document.getElementById('statAvgScore').textContent = data.avgScore.toFixed(1);
            document.getElementById('statPassRate').textContent = data.passRate.toFixed(1) + '%';
            document.getElementById('statExcellent').textContent = data.excellentRate.toFixed(1) + '%';
            document.getElementById('statRank').textContent = '#' + data.rank;
            
            const scores = currentSchool.grades.map(g => generateGradeData(currentSchool.id, g).avgScore);
            gradeChart.data.labels = currentSchool.grades;
            gradeChart.data.datasets[0].data = scores;
            gradeChart.update();
            
            const tbody = document.getElementById('gradeTableBody');
            tbody.innerHTML = '';
            currentSchool.grades.forEach(g => {
                const d = generateGradeData(currentSchool.id, g);
                const tr = document.createElement('tr');
                tr.className = g === grade ? 'bg-purple-500/15' : '';
                tr.innerHTML = `<td class="${g === grade ? 'font-semibold text-purple-400' : ''}">${g}</td><td>${d.students}äºº</td><td class="${d.avgScore >= 80 ? 'text-emerald-400' : ''}">${d.avgScore.toFixed(1)}</td><td>${d.passRate.toFixed(1)}%</td>`;
                tbody.appendChild(tr);
            });
        }

        function initCharts() {
            areaRadarChart = new Chart(document.getElementById('areaRadarChart'), {
                type: 'radar',
                data: {
                    labels: ['æ•¸', 'ä»£æ•¸', 'åº¦é‡', 'åœ–å½¢ç©ºé–“', 'æ•¸æ“š'],
                    datasets: [
                        { data: primaryAreaData.hk, borderColor: '#EC4899', backgroundColor: 'rgba(236,72,153,0.15)', borderWidth: 2, pointRadius: 4, pointBackgroundColor: '#EC4899' },
                        { data: primaryAreaData.gba, borderColor: '#F97316', backgroundColor: 'rgba(249,115,22,0.15)', borderWidth: 2, pointRadius: 4, pointBackgroundColor: '#F97316' },
                        { data: primaryAreaData.sh, borderColor: '#3B82F6', backgroundColor: 'rgba(59,130,246,0.15)', borderWidth: 2, pointRadius: 4, pointBackgroundColor: '#3B82F6' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { r: { min: 0, max: 100, ticks: { stepSize: 25, color: '#6B7280', backdropColor: 'transparent', font: { size: 9 } }, grid: { color: 'rgba(255,255,255,0.08)' }, angleLines: { color: 'rgba(255,255,255,0.08)' }, pointLabels: { color: '#D1D5DB', font: { size: 10, weight: 500 } } } }, plugins: { legend: { display: false } } }
            });

            unitBarChart = new Chart(document.getElementById('unitBarChart'), {
                type: 'bar',
                data: {
                    labels: ['20ä»¥å…§æ•¸', 'åŠ æ¸›æ³•', 'ä¹˜æ³•', 'é™¤æ³•', 'åˆ†æ•¸', 'å°æ•¸', 'æ™‚é–“'],
                    datasets: [
                        { data: primaryUnitData.hk, backgroundColor: 'rgba(236,72,153,0.8)', borderRadius: 4 },
                        { data: primaryUnitData.gba, backgroundColor: 'rgba(249,115,22,0.8)', borderRadius: 4 },
                        { data: primaryUnitData.sh, backgroundColor: 'rgba(59,130,246,0.8)', borderRadius: 4 }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { min: 0, max: 100, ticks: { color: '#9CA3AF', font: { size: 9 } }, grid: { color: 'rgba(255,255,255,0.05)' } }, y: { ticks: { color: '#D1D5DB', font: { size: 9, weight: 500 } }, grid: { display: false } } }, plugins: { legend: { display: false } } }
            });

            gradeChart = new Chart(document.getElementById('gradeChart'), {
                type: 'bar',
                data: { labels: ['P1','P2','P3','P4','P5','P6'], datasets: [{ data: [78,82,79,85,83,88], backgroundColor: 'rgba(139,92,246,0.8)', borderRadius: 4 }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { ticks: { color: '#9CA3AF', font: { size: 10 } }, grid: { display: false } }, y: { min: 50, max: 100, ticks: { color: '#9CA3AF', font: { size: 10 } }, grid: { color: 'rgba(255,255,255,0.05)' } } }, plugins: { legend: { display: false } } }
            });

            distributionChart = new Chart(document.getElementById('distributionChart'), {
                type: 'doughnut',
                data: { labels: ['å“è¶Š', 'å„ªç§€', 'è‰¯å¥½', 'åŠæ ¼', 'å¾…åŠ å¼·'], datasets: [{ data: [8.2, 22.5, 35.8, 24.3, 9.2], backgroundColor: ['#8B5CF6', '#3B82F6', '#10B981', '#F59E0B', '#EF4444'], borderWidth: 0, hoverOffset: 6 }] },
                options: { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { display: false } } }
            });
        }
    </script>
</body>
</html>
